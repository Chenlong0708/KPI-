<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>团队KPI管理与问题跟踪</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { padding: 30px; }
        .progress { height: 20px; }
        .rank-table th, .rank-table td { text-align: center; }
    </style>
</head>
<body>
    <h1 class="mb-4">团队KPI管理与问题跟踪</h1>
    <!-- 问题点跟踪统计 -->
    <h2>问题点跟踪统计</h2>
    <table class="table table-bordered align-middle" id="issueTable">
        <thead class="table-dark">
            <tr>
                <th>#</th>
                <th>问题描述</th>
                <th>责任人</th>
                <th>状态</th>
                <th>进度</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>1</td>
                <td>接口文档未完善</td>
                <td>张三</td>
                <td>进行中</td>
                <td><div class="progress"><div class="progress-bar bg-warning" style="width: 50%;">50%</div></div></td>
            </tr>
            <tr>
                <td>2</td>
                <td>测试用例覆盖率低</td>
                <td>李四</td>
                <td>未开始</td>
                <td><div class="progress"><div class="progress-bar bg-danger" style="width: 0%;">0%</div></div></td>
            </tr>
            <tr>
                <td>3</td>
                <td>性能优化未完成</td>
                <td>王五</td>
                <td>已完成</td>
                <td><div class="progress"><div class="progress-bar bg-success" style="width: 100%;">100%</div></div></td>
            </tr>
        </tbody>
    </table>
    <p>当前问题总数：<span id="issueCount"></span></p>

    <!-- 人员完成度排名 -->
    <h2 class="mt-5">人员完成度排名</h2>
    <table class="table table-striped rank-table" id="rankTable">
        <thead class="table-dark">
            <tr>
                <th>排名</th>
                <th>姓名</th>
                <th>完成任务数</th>
                <th>总任务数</th>
                <th>完成度</th>
            </tr>
        </thead>
        <tbody>
            <!-- JS自动填充 -->
        </tbody>
    </table>

    <script>
        // 1. 问题统计
        document.getElementById('issueCount').innerText = document.querySelectorAll('#issueTable tbody tr').length;

        // 2. 人员完成度数据（可根据实际情况扩充）
        const memberData = [
            { name: "张三", finished: 8, total: 10 },
            { name: "李四", finished: 5, total: 10 },
            { name: "王五", finished: 10, total: 10 }
        ];

        // 3. 排名&渲染
        memberData.sort((a, b) => (b.finished/b.total) - (a.finished/b.total));
        const rankTbody = document.querySelector('#rankTable tbody');
        memberData.forEach((m, idx) => {
            const percent = ((m.finished/m.total)*100).toFixed(0) + '%';
            rankTbody.innerHTML += `
                <tr>
                    <td>${idx+1}</td>
                    <td>${m.name}</td>
                    <td>${m.finished}</td>
                    <td>${m.total}</td>
                    <td>
                        <div class="progress">
                          <div class="progress-bar" style="width:${percent};">${percent}</div>
                        </div>
                    </td>
                </tr>
            `;
        });
    </script>
</body>
</html>
